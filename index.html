<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.14/lottie.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Anton&display=swap">
  <link rel="stylesheet" href="./css/style.css">
  <script src="./js/animation.js" type="module" defer></script>
  <script type="module" defer src="./js/app.js"></script>
  <title>Animal Spire</title>
</head>
<body>
    <!-- START SCREEN -->
    <section id="start-screen" class="screen text-center py-5">
        <div id="lottie-bg"></div>

        <!-- UI -->
        <header class="text-center text-white relative z-10">
            <h1 class="text-4xl font-bold mb-4" id="game-title">Animal Spire</h1>
            <button id="start-btn" class="px-6 py-3 bg-green-500 rounded-lg hover:bg-green-600">Start Game</button>
        </header>
    </section>

    <!-- ANIMAL SELECTION SCREEN -->
    <section id="animal-selection-screen" class="screen d-none py-4">
        <div id="lottie-bga"></div>
        <header class="text-center mb-4">
            <h2 id="fighter-title">Choose Your Fighter</h2>
        </header>

        <!-- Animal cards container -->
        <div id="animal-options" class="d-flex justify-content-center gap-3 flex-wrap">
            <!-- Cards will be injected here via JS -->
        </div>

        <!-- Buttons below the cards -->
        <div id="selection-control" class="d-flex justify-content-center gap-4 mt-4">
            <button id="reset-btn" class="btn btn-danger btn-lg">Cancel</button>
            <button id="generate-btn" class="btn btn-primary btn-lg">Refresh</button>
        </div>
    </section>

    <!-- BATTLE SCREEN -->
    <section id="battle-screen" class="screen d-none">
    <div id="lottie-bgb"></div>
    <div class="container py-4">

        <div id="battle-header" class="battle-header">
            <!-- Battle Header -->
            <div class="container my-3">
                <div class="row align-items-center text-center">
                    
                    <!-- Player Turn -->
                    <div class="col-3">
                        <div id="player-turn" class="p-2 bg-primary text-white rounded">
                            Player Turn
                        </div>
                    </div>

                    <!-- Round / Turn Info -->
                    <div class="col-6">
                        <div class="p-2 bg-light border rounded">
                            <span id="round-number" class="mx-2 fw-bold">Round: 1</span> |
                            <span id="turn-number" class="mx-2 fw-bold">Turn: 1</span>
                        </div>
                    </div>

                    <!-- Enemy Turn -->
                    <div class="col-3">
                        <div id="enemy-turn" class="p-2 bg-danger text-white rounded">
                            Enemy Turn
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="row justify-content-center align-items-center battle-container">

        <!-- PLAYER -->
        <div class="col-md-4 text-center combatant" id="player-container">
            <h3 id="player-name">Player</h3>
            <canvas id="player-canvas" width="64" height="64"></canvas>
            <div class="damage-container" id="player-damage-container" style="position: relative; height: 0;"></div>
            <div class="buff-container d-flex justify-content-start gap-1 mb-1" id="player-buffs">
                <div class="passive-wrapper"></div> 
                <div class="buff-wrapper d-flex gap-1"></div> 
            </div>
            <div class="progress mb-2">
            <div id="player-hp-bar" class="progress-bar bg-success" role="progressbar" style="width: 100%;"></div>
            </div>
            <p id="player-hp-text">HP: 100 / 100</p>

            <div class="d-flex justify-content-center rps-container gap-2">
            <div class="rps-square btn btn-outline-primary" id="player-rock">ü™®</div>
            <div class="rps-square btn btn-outline-primary" id="player-paper">üìÑ</div>
            <div class="rps-square btn btn-outline-primary" id="player-scissors">‚úÇÔ∏è</div>
            </div>
        </div>

        <!-- VS -->
        <div class="col-md-1 text-center">
            <h3>VS</h3>
        </div>

        <!-- ENEMY -->
        <div class="col-md-4 text-center combatant" id="enemy-container">
            <h3 id="enemy-name">Enemy</h3>
            <canvas id="enemy-canvas" width="64" height="64"></canvas>
            <div class="damage-container" id="enemy-damage-container" style="position: relative; height: 0;"></div>
            <div class="buff-container d-flex justify-content-start gap-1 mb-1" id="enemy-buffs">
                <div class="passive-wrapper"></div> 
                <div class="buff-wrapper d-flex gap-1"></div>
            </div>
            <div class="progress mb-2">
            <div id="enemy-hp-bar" class="progress-bar bg-danger" role="progressbar" style="width: 100%;"></div>
            </div>
            <p id="enemy-hp-text">HP: 100 / 100</p>

            <div class="d-flex justify-content-center rps-container gap-2">
            <div class="rps-square btn btn-outline-danger" id="enemy-rock">ü™®</div>
            <div class="rps-square btn btn-outline-danger" id="enemy-paper">üìÑ</div>
            <div class="rps-square btn btn-outline-danger" id="enemy-scissors">‚úÇÔ∏è</div>
            </div>
        </div>
        </div>

        <!-- Battle Log -->
        <div id="battle-log" class="mt-3 border p-2 bg-light rounded" style="min-height: 100px;"></div>

    </div>
    </section>

    <!-- POWER SELECTION SCREEN -->
    <section id="power-selection-screen" class="screen d-none py-4">
        <div id="lottie-bgc"></div>
        <div class="container text-center">
            <h2 class="mb-4" id="reward-title">Select Your Reward</h2>
            <div id="power-options" class="d-flex justify-content-center gap-3 flex-wrap"></div>
        </div>
    </section>

    <!-- END SCREEN -->
    <section id="end-screen" class="screen d-none text-center py-5">
        <div id="lottie-bgd"></div>
        <div class="container">
            <h2 id="end-title" class="mb-4">Game Over</h2>
            <div class="d-flex justify-content-center gap-2">
            <button id="restart-btn" class="btn btn-success">Play Again</button>
            <button id="cancel-btn" class="btn btn-secondary">Home</button>
            </div>
        </div>
    </section>

    <!-- VICTORY SCREEN -->
    <section id="victory-screen" class="screen d-none text-center py-5">
        <div id="lottie-bge"></div>
        <div class="container">
            <h2 id="victory-title" class="mb-4">Victory!</h2>
            <div class="d-flex justify-content-center gap-2">
            <button id="play-again-btn" class="btn btn-success">Play Again</button>
            <button id="home-btn" class="btn btn-secondary">Home</button>
            </div>
        </div>
    </section>

    <script type="module" defer src="./js/app.js"></script>
</body>
</html>